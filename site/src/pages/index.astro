---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { siteConfig } from '../lib/siteConfig';

const basePath = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;
---

<BaseLayout title={siteConfig.orgName}>
  <!-- Full-bleed hero with immersive community imagery -->
  <div class="relative min-h-[100svh] overflow-hidden">
    <!-- Background image with overlay -->
    <div class="absolute inset-0">
      <picture>
        <source
          type="image/webp"
          srcset={`${basePath}assets/community/hero-welcome-640.webp 640w, ${basePath}assets/community/hero-welcome-960.webp 960w, ${basePath}assets/community/hero-welcome-1280.webp 1280w, ${basePath}assets/community/hero-welcome-1920.webp 1920w`}
          sizes="100vw"
        />
        <img
          src={`${basePath}assets/community/hero-welcome.jpg`}
          srcset={`${basePath}assets/community/hero-welcome.jpg 1920w`}
          sizes="100vw"
          alt="Urbana Highlands community entrance, playground, and scenic mountain views"
          class="h-full w-full object-cover"
          width="1920"
          height="1288"
          loading="eager"
          decoding="async"
          fetchpriority="high"
        />
      </picture>
      <div class="absolute inset-0 bg-gradient-to-b from-slate-900/40 via-slate-900/20 to-slate-900/70"></div>
    </div>

    <!-- Floating glass nav using shared Header component -->
    <Header variant="hero" />

    <!-- Hero content -->
    <div class="relative z-10 flex min-h-[calc(100svh-88px)] flex-col items-center justify-center px-6 text-center">
      <!-- Live Weather Widget (top-right corner) -->
      <div id="weather-widget" class="absolute right-6 top-20 hidden rounded-2xl border border-white/20 bg-slate-900/60 px-4 py-3 text-white sm:block">
        <div class="flex items-center gap-3">
          <div id="weather-icon" class="text-3xl">ğŸŒ¤ï¸</div>
          <div class="text-left">
            <div class="flex items-baseline gap-1">
              <span id="weather-temp" class="text-2xl font-bold">--</span>
              <span class="text-sm text-white/60">Â°F</span>
            </div>
            <div id="weather-desc" class="text-xs text-white/70">Loading...</div>
          </div>
        </div>
        <div class="mt-1 text-[10px] text-white/40">Urbana, MD</div>
      </div>

      <div class="animate-fade-in-up">
        <span class="mb-6 inline-flex items-center gap-2 rounded-full border border-white/20 bg-slate-900/50 px-4 py-2 text-sm font-medium text-white">
          <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
          Frederick County, Maryland
        </span>
        
        <h1 class="mx-auto max-w-4xl text-5xl font-bold tracking-tight text-white sm:text-6xl lg:text-7xl" style="font-family: 'Plus Jakarta Sans', system-ui, sans-serif;">
          Welcome to<br />
          <span class="bg-gradient-to-r from-emerald-300 via-sky-300 to-violet-300 bg-clip-text text-transparent">
            Urbana Highlands
          </span>
        </h1>
        
        <p class="mx-auto mt-6 max-w-2xl text-lg text-white/80 sm:text-xl">
          Established in 1999, Urbana Highlands is a quiet community located in Southern Frederick County, MD.
        </p>

        <div class="mt-10 flex flex-wrap items-center justify-center gap-4">
          <a 
            href={siteConfig.links.residentPortal}
            target="_blank"
            rel="noopener noreferrer" 
            class="group inline-flex items-center gap-2 rounded-full bg-white px-7 py-4 text-base font-semibold text-slate-900 shadow-2xl transition hover:shadow-emerald-500/25"
          >
            Access Resident Portal
            <svg class="h-4 w-4 transition group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
          <a 
            href="#community"
            class="inline-flex items-center gap-2 rounded-full border border-white/30 bg-slate-900/50 px-7 py-4 text-base font-semibold text-white transition hover:bg-slate-900/70"
          >
            Explore Community
          </a>
        </div>
      </div>

      <!-- Scroll indicator -->
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
        <div class="flex h-10 w-6 items-start justify-center rounded-full border-2 border-white/30 p-1.5">
          <div class="h-2 w-1 rounded-full bg-white/60"></div>
        </div>
      </div>
    </div>
  </div>

  <main id="main-content" class="flex-1 bg-slate-50">
    <!-- Community highlights bento grid -->
    <section id="community" class="px-6 py-24">
      <div class="mx-auto max-w-6xl">
        <div class="mb-16 text-center">
          <span class="mb-4 inline-block rounded-full bg-emerald-100 px-4 py-1.5 text-sm font-semibold text-emerald-700">Our Community</span>
          <h2 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl" style="font-family: 'Plus Jakarta Sans', system-ui, sans-serif;">
            Life in Urbana Highlands
          </h2>
          <p class="mx-auto mt-4 max-w-2xl text-lg text-slate-600">
            Residents can access the Resident Portal, Pool Pass system, and community updates.
          </p>
        </div>

        <!-- Bento Grid -->
        <div class="grid auto-rows-[280px] grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
          <!-- Large feature card -->
          <div class="group relative col-span-1 row-span-2 overflow-hidden rounded-3xl sm:col-span-2 lg:col-span-2">
            <picture>
              <source
                type="image/webp"
                srcset={`${basePath}assets/community/playground-480.webp 480w, ${basePath}assets/community/playground.webp 960w`}
                sizes="(min-width: 1024px) 720px, (min-width: 640px) 50vw, 100vw"
              />
              <img 
                src={`${basePath}assets/community/playground.jpg`}
                srcset={`${basePath}assets/community/playground-480.jpg 480w, ${basePath}assets/community/playground.jpg 960w`}
                sizes="(min-width: 1024px) 720px, (min-width: 640px) 50vw, 100vw"
                alt="Community playground with slides and swings"
                class="h-full w-full object-cover transition duration-500 group-hover:scale-105"
                width="960"
                height="720"
                loading="lazy"
                decoding="async"
                fetchpriority="low"
              />
            </picture>
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 via-slate-900/20 to-transparent"></div>
            <div class="absolute bottom-0 left-0 p-8">
              <span class="mb-2 inline-block rounded-full bg-sky-500 px-3 py-1 text-xs font-semibold text-white">Family Friendly</span>
              <h3 class="text-2xl font-bold text-white sm:text-3xl">Community Playground</h3>
              <p class="mt-2 max-w-md text-white/80">Playground facilities available for residents and their families.</p>
            </div>
          </div>

          <!-- Walking paths -->
          <div class="group relative overflow-hidden rounded-3xl">
            <picture>
              <source
                type="image/webp"
                srcset={`${basePath}assets/community/walking-path-480.webp 480w, ${basePath}assets/community/walking-path.webp 960w`}
                sizes="(min-width: 1024px) 360px, (min-width: 640px) 50vw, 100vw"
              />
              <img 
                src={`${basePath}assets/community/walking-path.jpg`}
                srcset={`${basePath}assets/community/walking-path-480.jpg 480w, ${basePath}assets/community/walking-path.jpg 960w`}
                sizes="(min-width: 1024px) 360px, (min-width: 640px) 50vw, 100vw"
                alt="Scenic walking path through the community"
                class="h-full w-full object-cover transition duration-500 group-hover:scale-105"
                width="960"
                height="698"
                loading="lazy"
                decoding="async"
                fetchpriority="low"
              />
            </picture>
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent"></div>
            <div class="absolute bottom-0 left-0 p-6">
              <span class="mb-2 inline-block rounded-full bg-emerald-500 px-3 py-1 text-xs font-semibold text-white">Nature</span>
              <h3 class="text-xl font-bold text-white">Walking Trails</h3>
            </div>
          </div>

          <!-- Neighborhood -->
          <div class="group relative overflow-hidden rounded-3xl">
            <picture>
              <source
                type="image/webp"
                srcset={`${basePath}assets/community/neighborhood-road-480.webp 480w, ${basePath}assets/community/neighborhood-road.webp 960w`}
                sizes="(min-width: 1024px) 360px, (min-width: 640px) 50vw, 100vw"
              />
              <img 
                src={`${basePath}assets/community/neighborhood-road.jpg`}
                srcset={`${basePath}assets/community/neighborhood-road-480.jpg 480w, ${basePath}assets/community/neighborhood-road.jpg 960w`}
                sizes="(min-width: 1024px) 360px, (min-width: 640px) 50vw, 100vw"
                alt="Well-maintained neighborhood streets"
                class="h-full w-full object-cover transition duration-500 group-hover:scale-105"
                width="960"
                height="720"
                loading="lazy"
                decoding="async"
                fetchpriority="low"
              />
            </picture>
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent"></div>
            <div class="absolute bottom-0 left-0 p-6">
              <span class="mb-2 inline-block rounded-full bg-amber-500 px-3 py-1 text-xs font-semibold text-white">Community</span>
              <h3 class="text-xl font-bold text-white">Neighborhood Streets</h3>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Services section with glassmorphism cards -->
    <section class="relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 px-6 py-24">
      <!-- Decorative gradient orbs (opacity-based, no blur for performance) -->
      <div class="pointer-events-none absolute -left-40 -top-40 h-80 w-80 rounded-full bg-emerald-500/20"></div>
      <div class="pointer-events-none absolute -bottom-40 -right-40 h-80 w-80 rounded-full bg-sky-500/15"></div>
      
      <div class="relative mx-auto max-w-6xl">
        <div class="mb-16 text-center">
          <span class="mb-4 inline-block rounded-full border border-white/20 bg-white/10 px-4 py-1.5 text-sm font-semibold text-white">Quick Access</span>
          <h2 class="text-4xl font-bold tracking-tight text-white sm:text-5xl" style="font-family: 'Plus Jakarta Sans', system-ui, sans-serif;">
            Resident Services
          </h2>
          <p class="mx-auto mt-4 max-w-2xl text-lg text-white/70">
            Access portals and resources for Urbana Highlands residents.
          </p>
        </div>

        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          <!-- CiraConnect Card -->
          <div class="group rounded-3xl border border-white/10 bg-slate-800/80 p-8 transition hover:bg-slate-800/90">
            <div class="mb-6 flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 shadow-lg shadow-violet-500/25">
              <svg class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </div>
            <h3 class="mb-3 text-xl font-bold text-white">Resident Portal</h3>
            <p class="mb-6 text-white/60">Pay dues, update your info, and submit architectural requests through CiraConnect.</p>
            <a 
              href={siteConfig.links.residentPortal}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 font-semibold text-violet-400 transition hover:text-violet-300"
            >
              Open Portal
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          </div>

          <!-- Pool Pass Card -->
          <div class="group rounded-3xl border border-white/10 bg-slate-800/80 p-8 transition hover:bg-slate-800/90">
            <div class="mb-6 flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-sky-500 to-cyan-600 shadow-lg shadow-sky-500/25">
              <svg class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 class="mb-3 text-xl font-bold text-white">Pool Access</h3>
            <p class="mb-2 text-white/60">Register for pool passes through the eSoft system.</p>
            <p class="mb-6 text-sm text-white/40">{siteConfig.contact.poolAddress}</p>
            <a 
              href={siteConfig.links.poolPass}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 font-semibold text-sky-400 transition hover:text-sky-300"
            >
              Get Pool Pass
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          </div>

          <!-- Community Updates Card -->
          <div class="group rounded-3xl border border-white/10 bg-slate-800/80 p-8 transition hover:bg-slate-800/90 sm:col-span-2 lg:col-span-1">
            <div class="mb-6 flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg shadow-blue-500/25">
              <svg class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
              </svg>
            </div>
            <h3 class="mb-3 text-xl font-bold text-white">Stay Connected</h3>
            <p class="mb-6 text-white/60">Join Us On Facebook for Community updates and announcements.</p>
            <a 
              href={siteConfig.links.facebook}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 font-semibold text-blue-400 transition hover:text-blue-300"
            >
              Join Facebook Group
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Announcements section -->
    <section class="bg-white px-6 py-24">
      <div class="mx-auto max-w-6xl">
        <div class="mb-16 flex flex-wrap items-end justify-between gap-6">
          <div>
            <span class="mb-4 inline-block rounded-full bg-amber-100 px-4 py-1.5 text-sm font-semibold text-amber-700">Stay Informed</span>
            <h2 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl" style="font-family: 'Plus Jakarta Sans', system-ui, sans-serif;">
              Latest Updates
            </h2>
          </div>
          <a 
            href={`${basePath}announcements/`}
            class="inline-flex items-center gap-2 rounded-full border-2 border-slate-200 px-6 py-3 font-semibold text-slate-700 transition hover:border-slate-300 hover:bg-slate-50"
          >
            View All Updates
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>

        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          <article class="group rounded-2xl border border-slate-200 bg-white p-6 transition hover:border-slate-300 hover:shadow-lg">
            <div class="mb-4 flex items-center gap-3">
              <span class="flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-100 text-lg">ğŸŒ³</span>
              <span class="text-sm font-medium text-slate-500">Landscaping</span>
            </div>
            <h3 class="mb-2 text-lg font-bold text-slate-900">Missing a Street Tree?</h3>
            <p class="text-slate-600">All tree removal and reinstall requires an Architectural Change Request. If you're missing a tree, it's time to replace it with an approved variety.</p>
          </article>

          <article class="group rounded-2xl border border-slate-200 bg-white p-6 transition hover:border-slate-300 hover:shadow-lg">
            <div class="mb-4 flex items-center gap-3">
              <span class="flex h-10 w-10 items-center justify-center rounded-xl bg-orange-100 text-lg">ğŸ </span>
              <span class="text-sm font-medium text-slate-500">Home Improvement</span>
            </div>
            <h3 class="mb-2 text-lg font-bold text-slate-900">Replacing Your Roof?</h3>
            <p class="text-slate-600">Unless it's the exact same color and design as the original, it must be approved by the HOA in advance.</p>
          </article>

          <article class="group rounded-2xl border border-slate-200 bg-white p-6 transition hover:border-slate-300 hover:shadow-lg">
            <div class="mb-4 flex items-center gap-3">
              <span class="flex h-10 w-10 items-center justify-center rounded-xl bg-sky-100 text-lg">ğŸ› ï¸</span>
              <span class="text-sm font-medium text-slate-500">Construction</span>
            </div>
            <h3 class="mb-2 text-lg font-bold text-slate-900">Adding a Deck?</h3>
            <p class="text-slate-600">Please log into the Resident Portal and complete an Architectural Change Request prior to beginning work.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- Contact CTA -->
    <section class="relative overflow-hidden bg-gradient-to-r from-emerald-600 to-teal-500 px-6 py-20">
      <div class="pointer-events-none absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRjMC0yLjIwOS0xLjc5MS00LTQtNHMtNCAxLjc5MS00IDQgMS43OTEgNCA0IDQgNC0xLjc5MSA0LTR6bTAtMThDMzYgMTMuNzkxIDM0LjIwOSAxMiAzMiAxMnMtNCAxLjc5MS00IDQgMS43OTEgNCA0IDQgNC0xLjc5MSA0LTR6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-30"></div>
      <div class="relative mx-auto flex max-w-4xl flex-col items-center text-center">
        <h2 class="text-3xl font-bold text-white sm:text-4xl" style="font-family: 'Plus Jakarta Sans', system-ui, sans-serif;">
          Questions? We're here to help.
        </h2>
        <p class="mt-4 text-lg text-white/80">
          Contact the management company at <strong class="text-white">{siteConfig.contact.managementPhone}</strong>
        </p>
        <a 
          href={`${basePath}contact/`}
          class="mt-8 inline-flex items-center gap-2 rounded-full bg-white px-8 py-4 text-base font-semibold text-emerald-700 shadow-xl transition hover:bg-white/90 hover:shadow-2xl"
        >
          Get in Touch
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
  
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in-up {
    animation: fade-in-up 1s ease-out;
  }
</style>

<script>
  // Weather widget - fetches live weather for Urbana, MD using Open-Meteo API (free, no key required)
  const URBANA_LAT = 39.3257;
  const URBANA_LON = -77.3547;
  
  // Weather code to emoji mapping
  const weatherIcons: Record<number, string> = {
    0: 'â˜€ï¸',   // Clear sky
    1: 'ğŸŒ¤ï¸',  // Mainly clear
    2: 'â›…',   // Partly cloudy
    3: 'â˜ï¸',   // Overcast
    45: 'ğŸŒ«ï¸', // Fog
    48: 'ğŸŒ«ï¸', // Depositing rime fog
    51: 'ğŸŒ§ï¸', // Light drizzle
    53: 'ğŸŒ§ï¸', // Moderate drizzle
    55: 'ğŸŒ§ï¸', // Dense drizzle
    61: 'ğŸŒ§ï¸', // Slight rain
    63: 'ğŸŒ§ï¸', // Moderate rain
    65: 'ğŸŒ§ï¸', // Heavy rain
    71: 'ğŸŒ¨ï¸', // Slight snow
    73: 'ğŸŒ¨ï¸', // Moderate snow
    75: 'â„ï¸',  // Heavy snow
    77: 'ğŸŒ¨ï¸', // Snow grains
    80: 'ğŸŒ¦ï¸', // Slight rain showers
    81: 'ğŸŒ¦ï¸', // Moderate rain showers
    82: 'â›ˆï¸',  // Violent rain showers
    85: 'ğŸŒ¨ï¸', // Slight snow showers
    86: 'ğŸŒ¨ï¸', // Heavy snow showers
    95: 'â›ˆï¸',  // Thunderstorm
    96: 'â›ˆï¸',  // Thunderstorm with slight hail
    99: 'â›ˆï¸',  // Thunderstorm with heavy hail
  };

  const weatherDescriptions: Record<number, string> = {
    0: 'Clear sky',
    1: 'Mainly clear',
    2: 'Partly cloudy',
    3: 'Overcast',
    45: 'Foggy',
    48: 'Foggy',
    51: 'Light drizzle',
    53: 'Drizzle',
    55: 'Dense drizzle',
    61: 'Light rain',
    63: 'Rain',
    65: 'Heavy rain',
    71: 'Light snow',
    73: 'Snow',
    75: 'Heavy snow',
    77: 'Snow grains',
    80: 'Rain showers',
    81: 'Rain showers',
    82: 'Heavy showers',
    85: 'Snow showers',
    86: 'Heavy snow',
    95: 'Thunderstorm',
    96: 'Thunderstorm',
    99: 'Severe storm',
  };

  async function fetchWeather() {
    try {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${URBANA_LAT}&longitude=${URBANA_LON}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=America%2FNew_York`;
      const response = await fetch(url);
      const data = await response.json();
      
      const temp = Math.round(data.current.temperature_2m);
      const code = data.current.weather_code;
      
      const tempEl = document.getElementById('weather-temp');
      const iconEl = document.getElementById('weather-icon');
      const descEl = document.getElementById('weather-desc');
      
      if (tempEl) tempEl.textContent = temp.toString();
      if (iconEl) iconEl.textContent = weatherIcons[code] || 'ğŸŒ¡ï¸';
      if (descEl) descEl.textContent = weatherDescriptions[code] || 'Current weather';
    } catch (error) {
      console.error('Weather fetch failed:', error);
      const descEl = document.getElementById('weather-desc');
      if (descEl) descEl.textContent = 'Unavailable';
    }
  }

  // Fetch weather on page load
  fetchWeather();
  
  // Refresh every 15 minutes
  setInterval(fetchWeather, 15 * 60 * 1000);
</script>
