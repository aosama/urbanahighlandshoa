---
import { siteConfig } from '../lib/siteConfig';

const { variant = 'simple' } = Astro.props;
const basePath = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;

const navLinks = [
  { href: basePath, label: 'Home' },
  { href: `${basePath}announcements/`, label: 'Announcements' },
  { href: `${basePath}events/`, label: 'Events' },
  { href: `${basePath}documents/`, label: 'Documents' },
  { href: `${basePath}contact/`, label: 'Contact' },
];

const externalButtons = [
  { href: siteConfig.links.facebook, label: 'Facebook', variant: 'default' },
  { href: siteConfig.links.poolPass, label: 'Pool Pass', variant: 'default' },
  { href: siteConfig.links.residentPortal, label: 'Resident Portal', variant: 'primary' },
];

const headerClass = variant === 'hero'
  ? 'bg-[radial-gradient(circle_at_top_left,rgba(43,95,71,0.15),transparent_55%),linear-gradient(120deg,rgba(207,168,79,0.22),rgba(255,255,255,0.3))]'
  : 'bg-white/70 backdrop-blur border-b border-black/10';

const topBarClass = variant === 'hero'
  ? 'bg-white/70 backdrop-blur border-b border-black/10'
  : '';
---

<header class={headerClass}>
  <div class={topBarClass}>
    <div class="mx-auto flex max-w-[1100px] flex-col gap-3 px-5 py-3 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between sm:gap-4 sm:py-4">
      <a class="flex items-center gap-3 font-bold tracking-[0.4px] focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[rgba(207,168,79,0.45)] rounded-xl" href={basePath}>
        <img
          src={`${basePath}assets/UH-logo.jpg`}
          alt="Urbana Highlands HOA logo"
          class="h-11 w-11 rounded-xl shadow-[0_8px_18px_rgba(18,33,43,0.12)]"
          loading="eager"
        />
        <span>{siteConfig.siteName}</span>
      </a>

      <nav class="flex w-full flex-wrap items-center gap-x-6 gap-y-1.5 text-sm font-semibold text-[#214738] sm:w-auto">
        {navLinks.map((link) => (
          <a class="hover:underline focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[rgba(207,168,79,0.45)] rounded-md px-1 py-0.5" href={link.href}>{link.label}</a>
        ))}
      </nav>

      <div class="flex w-full flex-wrap gap-2.5 sm:w-auto">
        {externalButtons.map((button) => (
          <a
            class={button.variant === 'primary'
              ? "rounded-full border border-[#2b5f47] bg-[#2b5f47] px-3 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:shadow-[0_8px_18px_rgba(18,33,43,0.12)] focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[rgba(207,168,79,0.55)]"
              : "rounded-full border border-black/10 bg-white/70 px-3 py-2 text-sm font-semibold backdrop-blur transition hover:-translate-y-0.5 hover:shadow-[0_8px_18px_rgba(18,33,43,0.12)] focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[rgba(207,168,79,0.45)]"
            }
            href={button.href}
            target="_blank"
            rel="noopener noreferrer"
          >
            {button.label}
          </a>
        ))}
      </div>
    </div>
  </div>

  {variant === 'hero' && (
    <div class="px-5 pt-10 pb-20">
      <slot />
    </div>
  )}
</header>
